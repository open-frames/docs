---
title: "Open Frames - frames.js"
description: "An extension of Open Graph that makes link previews interactive."
---

# Frames.js

Discover how Frames.js seamlessly incorporates XMTP payloads

- [Official Docs](https://framesjs.org/guides/open-frames): Official Frames.js Documentation.
- [Frames.js quickstart](https://github.com/ephemeraHQ/open-frames-starter-framesjs/): OnchainKit quickstart that integrates XMTP.

## Metadata

First add the metadata indicating which protocols you support.

```jsx
// ...
import { openframes } from "frames.js/middleware";

const frames = createFrames({
  // ...
  middleware: [
    openframes({
      clientProtocol: {
        id: "my-protocol",
        version: "1.0.0",
      },
      handler: {
        isValidPayload: (body: JSON) => {
          // Check if the request body is a valid Open Frames action
          // ...
          return isValid; // true or false
        },
        getFrameMessage: async (body: JSON) => {
          // Parse the data in the request body and return a Frame message
          // ...
          return frameMessage;
        },
      },
    }),
  ],
});
```

## Validate incoming messages

Now validate the incoming message.

```jsx
/* eslint-disable react/jsx-key */
import { openframes } from "frames.js/middleware";
import { createFrames } from "frames.js/next";
import { getXmtpFrameMessage, isXmtpFrameActionPayload } from "frames.js/xmtp";

export const frames = createFrames({
  middleware: [
    openframes({
      clientProtocol: {
        id: "xmtp",
        version: "2024-02-09",
      },
      handler: {
        isValidPayload: (body: JSON) => isXmtpFrameActionPayload(body),
        getFrameMessage: async (body: JSON) => {
          if (isXmtpFrameActionPayload(body)) {
            return undefined;
          }
          // payload is an XMTP frame action payload

          const result = await getXmtpFrameMessage(body);
          /**
          {
            frameUrl: 'https://example.com',
            buttonIndex: 1,
            timestamp: 1234567890,
            opaqueConversationIdentifier: "...",
            verifiedWalletAddress: "0x...",
          }
          **/
          const { verifiedWalletAddress } = result;
          // ... do something with the verifiedWalletAddress
          return { ...result };
        },
      },
    }),
  ],
});
```
